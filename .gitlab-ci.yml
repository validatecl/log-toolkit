image: docker:dind
services:
  - docker:latest

stages:
  - test

variables:
  GOFLAGS: -mod=vendor
  
unit-test:
  stage: test
  image: fifintegracion/golang:alpine
  tags:
    - runner-qa-orgrimmar
  script:
    - make test
  only:
    - branches

coverage:
  stage: test
  image: fifintegracion/golang:alpine
  tags:
    - runner-qa-orgrimmar
  script:
    - make coverage
  only:
    - branches
